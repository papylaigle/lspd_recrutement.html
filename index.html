<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>LSPD Academy – Questionnaire de Recrutement</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #f4f6f9;
  --card: #ffffff;
  --text: #1f2937;
  --accent: #2563eb;
  --accent-hover: #1d4ed8;
}

.dark {
  --bg: #0f172a;
  --card: #1e293b;
  --text: #e2e8f0;
  --accent: #3b82f6;
  --accent-hover: #1d4ed8;
}

body {
  font-family: 'Poppins', sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  transition: background 0.3s, color 0.3s;
}

header {
  text-align: center;
  padding: 30px;
  background: var(--accent);
  color: white;
}

header h1 {
  margin: 0;
  font-size: 32px;
  font-weight: 600;
}

header h2 {
  margin-top: 5px;
  font-size: 18px;
  font-weight: 400;
}

.container {
  max-width: 900px;
  margin: 30px auto;
  padding: 20px;
}

h3 {
  margin-top: 30px;
  font-size: 20px;
  border-left: 4px solid var(--accent);
  padding-left: 10px;
}

.question {
  background: var(--card);
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  margin-bottom: 15px;
  transition: transform 0.2s;
}

.question:hover {
  transform: scale(1.02);
}

.rep-box {
  margin-top: 10px;
  padding: 10px;
  background: rgba(37,99,235,0.1);
  border-left: 3px solid var(--accent);
  border-radius: 6px;
}

input[type="text"], textarea {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  font-family: inherit;
}

textarea {
  resize: vertical;
  min-height: 80px;
}

button {
  background: var(--accent);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
  margin-top: 10px;
  width: 100%;
}

button:hover {
  background: var(--accent-hover);
}

.result {
  margin-top: 20px;
  padding: 15px;
  border-radius: 8px;
  text-align: center;
  font-size: 18px;
  font-weight: 600;
}

.success {
  background: #d1fae5;
  color: #065f46;
}

.fail {
  background: #fee2e2;
  color: #991b1b;
}

.theme-toggle {
  position: fixed;
  top: 20px;
  right: 20px;
  background: var(--card);
  border: 2px solid var(--accent);
  width: 50px;
  height: 26px;
  border-radius: 20px;
  cursor: pointer;
}

.theme-toggle .circle {
  width: 20px;
  height: 20px;
  background: var(--accent);
  border-radius: 50%;
  margin: 2px;
  transition: 0.3s;
}

.dark .theme-toggle .circle {
  transform: translateX(24px);
}
</style>
</head>
<body>

<!-- Toggle clair/sombre -->
<div class="theme-toggle" onclick="toggleTheme()">
  <div class="circle"></div>
</div>

<header>
  <h1>LSPD ACADEMY</h1>
  <h2>Formulaire de Recrutement RP</h2>
</header>

<div class="container">
  <h3>Informations du candidat</h3>
  <label>Nom & Prénom :</label>
  <input type="text" id="cand_nom">
  <label>Âge :</label>
  <input type="text" id="cand_age">
  <label>Motivations :</label>
  <textarea id="cand_motiv"></textarea>
  <label>Qualités / Défauts :</label>
  <textarea id="cand_qd"></textarea>
  <label>Pourquoi vous choisir :</label>
  <textarea id="cand_pourquoi"></textarea>

  <h3>Questions principales (2 pts chacune)</h3>
  <form id="quiz">
    <div class="question">
      <label>Motivation sérieuse et orientée RP</label><br>
      <input type="checkbox" class="point" data-value="2">
      <div class="rep-box">Motivation cohérente et réaliste.</div>
    </div>
    <!-- Ajoute ici les autres questions principales, CEVITAL, mises en situation, etc. -->
    
    <div class="actions">
      <button type="button" onclick="calculer()">Calculer la note finale</button>
      <button type="button" onclick="imprimer()">Imprimer / PDF</button>
      <button type="button" onclick="envoyerDiscord()">Envoyer au Discord (Webhook)</button>
    </div>
  </form>

  <div id="resultat"></div>
</div>

<script>
function calculer() {
  let points = document.querySelectorAll('.point');
  let total = 0;
  let cevitalOK = true;

  points.forEach(p => {
    if (p.checked) total += parseInt(p.getAttribute("data-value"));
  });

  let cevitalQuestions = document.querySelectorAll('.cevital');
  cevitalQuestions.forEach(c => { if (!c.checked) cevitalOK = false; });

  let resultat = document.getElementById("resultat");
  if (!cevitalOK) {
    resultat.innerHTML = "<div class='result fail'>Score : " + total + " / 100 — CEVITAL incomplet, REFUSÉ</div>";
    return;
  }
  if (total >= 60) {
    resultat.innerHTML = "<div class='result success'>Score : " + total + " / 100 — CANDIDAT APTE</div>";
  } else {
    resultat.innerHTML = "<div class='result fail'>Score : " + total + " / 100 — REFUSÉ</div>";
  }
}

function imprimer() { window.print(); }

function envoyerDiscord() {
  const webhookUrl = "VOTRE_WEBHOOK_ICI"; // Remplace par ton vrai webhook
  const nom = document.getElementById('cand_nom').value || "N/A";
  const age = document.getElementById('cand_age').value || "N/A";
  const motiv = document.getElementById('cand_motiv').value || "N/A";
  const qd = document.getElementById('cand_qd').value || "N/A";
  const pourquoi = document.getElementById('cand_pourquoi').value || "N/A";

  const contenu = {
    embeds: [{
      title: "Nouvelle candidature LSPD Academy",
      color: 3447003,
      fields: [
        { name: "Candidat", value: nom + " (" + age + " ans)" },
        { name: "Motivations", value: motiv },
        { name: "Qualités / Défauts", value: qd },
        { name: "Pourquoi ?", value: pourquoi }
      ],
      footer: { text: "Formulaire LSPD Academy" },
      timestamp: new Date().toISOString()
    }]
  };

  fetch(webhookUrl, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(contenu)
  }).then(res => {
    if (res.ok) alert("Dossier envoyé au Discord.");
    else alert("Erreur lors de l’envoi (vérifie le webhook).");
  }).catch(err => alert("Erreur réseau : " + err));
}

function toggleTheme() {
  document.body.classList.toggle("dark");
}
</script>

</body>
</html>